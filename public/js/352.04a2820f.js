"use strict";(self["webpackChunkwex_results"]=self["webpackChunkwex_results"]||[]).push([[352],{6352:(e,t,l)=>{l.r(t),l.d(t,{default:()=>M});var a=l(9835),s=l(6970);const d={class:"text-h5"},u={class:"q-pa-sm",align:"right"},o={class:"q-pa-sm"},n=(0,a._)("strong",null,"Level",-1),r={align:"right"},i={class:"q-pa-sm"},m=(0,a._)("th",{class:"text-left"},"Level Subjects",-1),c={class:"text-right"},p={class:"text-left"},h={class:"text-right"};function v(e,t,l,v,b,g){const f=(0,a.up)("confirm-dialog"),_=(0,a.up)("q-card-section"),w=(0,a.up)("q-btn"),j=(0,a.up)("q-separator"),k=(0,a.up)("q-input"),D=(0,a.up)("q-form"),$=(0,a.up)("add-level-subjects-modal"),q=(0,a.up)("q-markup-table"),W=(0,a.up)("q-card"),x=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(x,null,{default:(0,a.w5)((()=>[(0,a.Wm)(f,{ref:"confirmDialog"},null,512),(0,a.Wm)(W,{class:"my-card no-borders",flat:""},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{horizontal:""},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{class:"q-pa-sm"},{default:(0,a.w5)((()=>[(0,a._)("div",d,(0,s.zw)(b.level.name),1),(0,a._)("div",null,(0,s.zw)(b.level.description),1)])),_:1})])),_:1}),(0,a._)("div",u,[(0,a.Wm)(w,{color:"negative",label:"Delete","no-caps":"",dense:"",onClick:t[0]||(t[0]=e=>g.deleteLevel(b.level.id))})]),(0,a.Wm)(j),(0,a._)("div",null,[(0,a._)("div",o,[n,(0,a.Wm)(D,{onSubmit:g.updateLevel,class:"q-gutter-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{modelValue:b.formData.rank,"onUpdate:modelValue":t[1]||(t[1]=e=>b.formData.rank=e),type:"number",label:"Rank",required:""},null,8,["modelValue"]),(0,a.Wm)(k,{modelValue:b.formData.name,"onUpdate:modelValue":t[2]||(t[2]=e=>b.formData.name=e),type:"text",label:"Name",required:""},null,8,["modelValue"]),(0,a.Wm)(k,{modelValue:b.formData.description,"onUpdate:modelValue":t[3]||(t[3]=e=>b.formData.description=e),type:"text",label:"Description"},null,8,["modelValue"]),(0,a._)("div",r,[(0,a.Wm)(w,{label:"update",type:"submit",color:"primary"})])])),_:1},8,["onSubmit"])]),(0,a._)("div",i,[(0,a.Wm)(q,null,{default:(0,a.w5)((()=>[(0,a._)("thead",null,[(0,a._)("tr",null,[m,(0,a._)("th",c,[(0,a.Wm)($,{level:b.level,subjects:b.subjects,onUpdateLevel:t[4]||(t[4]=e=>b.level=e)},null,8,["level","subjects"])])])]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(b.level.subjects,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.id},[(0,a._)("td",p,(0,s.zw)(e.name),1),(0,a._)("td",h,(0,s.zw)(e.abbr),1)])))),128))])])),_:1})])])])),_:1})])),_:1})}var b=l(3419);l(702);const g={class:"q-pa-md"},f=(0,a._)("strong",null,"Select Subjects",-1),_=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",{class:"text-left"},"Subject"),(0,a._)("th",{class:"text-right"})])],-1),w={class:"text-left"},j={class:"text-right"},k=["name","checked"],D={class:"q-pt-md",align:"right"};function $(e,t,l,d,u,o){const n=(0,a.up)("q-btn"),r=(0,a.up)("q-markup-table"),i=(0,a.up)("q-card"),m=(0,a.up)("q-dialog");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(n,{icon:"add",color:"primary",flat:"",dense:"",onClick:t[0]||(t[0]=e=>u.modal=!0)}),(0,a.Wm)(m,{modelValue:u.modal,"onUpdate:modelValue":t[3]||(t[3]=e=>u.modal=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{style:{width:"700px","max-width":"80vw"}},{default:(0,a.w5)((()=>[(0,a._)("div",g,[f,(0,a.Wm)(r,{flat:"",bordered:""},{default:(0,a.w5)((()=>[_,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.subjects,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.id},[(0,a._)("td",w,(0,s.zw)(e.name),1),(0,a._)("td",j,[(0,a._)("input",{type:"checkbox",onChange:t[1]||(t[1]=(...e)=>o.addOrRemoveSubject&&o.addOrRemoveSubject(...e)),name:e.id,checked:-1!=l.level.subjects.findIndex((t=>t.id==e.id))},null,40,k)])])))),128))])])),_:1}),(0,a._)("div",D,[(0,a.Wm)(n,{label:"OK",onClick:t[2]||(t[2]=e=>u.modal=!1),color:"primary"})])])])),_:1})])),_:1},8,["modelValue"])])}const q={props:["subjects","level"],data(){return{modal:!1,levelSubjects:[]}},created(){},methods:{addOrRemoveSubject(e){console.log(e.target.name),e.target.checked?this.$api.put(`/levels/${this.$route.params.id}/subjects/add/`,[e.target.name]).then((e=>{this.$emit("updateLevel",e.data)})):this.$api.put(`/levels/${this.$route.params.id}/subjects/remove/`,[e.target.name]).then((e=>{this.$emit("updateLevel",e.data)}))}}};var W=l(1639),x=l(4455),y=l(2074),S=l(4458),Z=l(6933),L=l(9984),Q=l.n(L);const V=(0,W.Z)(q,[["render",$]]),C=V;Q()(q,"components",{QBtn:x.Z,QDialog:y.Z,QCard:S.Z,QMarkupTable:Z.Z});const z={components:{ConfirmDialog:b.Z,AddLevelSubjectsModal:C},data(){return{level:{},teachers:[],subjects:[],formData:{rank:"",name:"",description:""}}},created(){this.getLevel(),this.getSubjects()},methods:{getLevel(){this.$api.get(`/levels/${this.$route.params.id}/`).then((e=>{this.level=e.data,this.formData.name=this.level.name,this.formData.rank=this.level.rank,this.formData.description=this.level.description}))},addLevelSubjects(){this.$api.put(`/levels/${this.$route.params.id}/subjects/`,[1,2]).then((e=>{this.level=e.data,console.log(e.data)}))},getSubjects(){this.$api.get("/subjects/").then((e=>{this.subjects=e.data}))},updateLevel(){this.$api.put(`/levels/${this.level.id}/`,this.formData).then((e=>{this.level=e.data}))},deleteLevel(e){this.$refs.confirmDialog.show({title:"Hello",message:`Are you sure you want to delete the level "${e}"?`,okButton:"Yes, delete"}).then((t=>{t&&this.$api.delete(`/levels/${e}/`).then((e=>{204==e.status&&this.$router.push("/levels")}))}))}}};var U=l(9885),O=l(3190),R=l(926),B=l(8326),H=l(6611);const K=(0,W.Z)(z,[["render",v]]),M=K;Q()(z,"components",{QPage:U.Z,QCard:S.Z,QCardSection:O.Z,QBtn:x.Z,QSeparator:R.Z,QForm:B.Z,QInput:H.Z,QMarkupTable:Z.Z})}}]);