"use strict";(self["webpackChunkwex_results"]=self["webpackChunkwex_results"]||[]).push([[357],{357:(e,t,a)=>{a.r(t),a.d(t,{default:()=>R});var l=a(9835);const o={class:"q-pa-sm"},s={class:"flex justify-between q-py-sm"},n=(0,l._)("label",{class:"text-h4"},"Students",-1);function d(e,t,a,d,m,i){const u=(0,l.up)("confirm-dialog"),r=(0,l.up)("create-student-modal"),c=(0,l.up)("q-btn"),p=(0,l.up)("router-link"),f=(0,l.up)("q-td"),_=(0,l.up)("q-table"),h=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{ref:"confirmDialog"},null,512),(0,l._)("div",o,[(0,l._)("div",s,[n,(0,l.Wm)(r,{onAddStudent:t[0]||(t[0]=e=>m.students.push(e))})]),(0,l.Wm)(_,{rows:m.students,columns:m.columns,"row-key":"id","rows-per-page-options":[50]},{"body-cell-action":(0,l.w5)((e=>[(0,l.Wm)(f,{props:e},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{class:"text-white",to:`/students/${e.key}`},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{color:"primary","icon-right":"edit","no-caps":"",flat:"",dense:""})])),_:2},1032,["to"]),(0,l.Wm)(c,{color:"negative","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:t=>i.deleteStudent(e.key)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns"])])])),_:1})}var m=a(6970);const i=(0,l._)("div",{class:"text-h6"},"New Student",-1),u=(0,l._)("label",{class:"text-grey-8"},"Date of Birth",-1),r={class:"row q-pa-xs rounded-borders",style:{border:"1px solid #dddddd"}},c={class:"col-9 q-my-auto"},p={class:"col-3",align:"right"},f={class:"row items-center justify-end q-gutter-sm"},_={class:"flex justify-between"};function h(e,t,a,o,s,n){const d=(0,l.up)("q-btn"),h=(0,l.up)("q-card-section"),b=(0,l.up)("q-input"),w=(0,l.up)("q-date"),g=(0,l.up)("q-popup-proxy"),y=(0,l.up)("q-select"),D=(0,l.up)("q-form"),v=(0,l.up)("q-card-actions"),W=(0,l.up)("q-card"),q=(0,l.up)("q-dialog"),x=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(d,{label:"New Student",icon:"add",color:"primary",onClick:t[0]||(t[0]=e=>o.medium=!0)}),(0,l.Wm)(q,{modelValue:o.medium,"onUpdate:modelValue":t[6]||(t[6]=e=>o.medium=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{style:{width:"700px","max-width":"80vw"}},{default:(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[i])),_:1}),(0,l.Wm)(h,{class:"q-pt-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(D,{onSubmit:n.createStudent,class:"q-gutter-md"},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{modelValue:s.formData.first_name,"onUpdate:modelValue":t[1]||(t[1]=e=>s.formData.first_name=e),type:"text",label:"First Name",required:""},null,8,["modelValue"]),(0,l.Wm)(b,{modelValue:s.formData.last_name,"onUpdate:modelValue":t[2]||(t[2]=e=>s.formData.last_name=e),type:"text",label:"Last Name",required:""},null,8,["modelValue"]),(0,l.Wm)(b,{modelValue:s.formData.middle_name,"onUpdate:modelValue":t[3]||(t[3]=e=>s.formData.middle_name=e),type:"text",label:"Middle Name"},null,8,["modelValue"]),(0,l._)("div",null,[u,(0,l._)("div",r,[(0,l._)("div",c,(0,m.zw)(s.formData.dob),1),(0,l._)("div",p,[(0,l.Wm)(d,{col:"2",icon:"event",round:"",color:"primary"},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{modelValue:s.formData.dob,"onUpdate:modelValue":t[4]||(t[4]=e=>s.formData.dob=e),mask:"YYYY-MM-DD",title:s.formData.dob,subtitle:"Date of Birth","years-in-month-view":""},{default:(0,l.w5)((()=>[(0,l._)("div",f,[(0,l.wy)((0,l.Wm)(d,{label:"Cancel",color:"primary",flat:""},null,512),[[x]]),(0,l.wy)((0,l.Wm)(d,{label:"OK",color:"primary",flat:""},null,512),[[x]])])])),_:1},8,["modelValue","title"])])),_:1})])),_:1})])])]),(0,l.Wm)(y,{outlined:"",modelValue:s.formData.class_room,"onUpdate:modelValue":t[5]||(t[5]=e=>s.formData.class_room=e),"option-label":e=>`${e.name} ${e.stream}`,"option-value":"id",options:e.classRooms,label:"Class","emit-value":"","map-options":""},null,8,["modelValue","option-label","options"]),(0,l._)("div",_,[(0,l._)("div",null,[(0,l.wy)((0,l.Wm)(d,{flat:"",color:"primary",label:"Cancel"},null,512),[[x]])]),(0,l.Wm)(d,{label:"Submit",type:"submit",color:"primary"})])])),_:1},8,["onSubmit"])])),_:1}),(0,l.Wm)(v,{align:"right",class:"bg-white text-teal"})])),_:1})])),_:1},8,["modelValue"])])}var b=a(499);const w={props:["students"],setup(){return{medium:(0,b.iH)(!1)}},data(){return{formData:{first_name:null,last_name:null,middle_name:null,dob:null,class_room:null}}},created(){this.getClassRooms()},methods:{createStudent(){console.log(this.formData),this.$api.post("/students/",this.formData).then((e=>{this.$emit("addStudent",e.data),this.medium=!1}))},getClassRooms(){this.$api.get("/class-rooms/").then((e=>{this.classRooms=e.data}))}}};var g=a(1639),y=a(4455),D=a(2074),v=a(4458),W=a(3190),q=a(8326),x=a(6611),S=a(2765),V=a(6711),Z=a(9812),C=a(1821),$=a(2146),Q=a(9984),k=a.n(Q);const N=(0,g.Z)(w,[["render",h]]),U=N;k()(w,"components",{QBtn:y.Z,QDialog:D.Z,QCard:v.Z,QCardSection:W.Z,QForm:q.Z,QInput:x.Z,QPopupProxy:S.Z,QDate:V.Z,QSelect:Z.Z,QCardActions:C.Z}),k()(w,"directives",{ClosePopup:$.Z});var B=a(3419);const P={components:{CreateStudentModal:U,ConfirmDialog:B.Z},name:"StudentsPage",data(){return{columns:[{name:"first_name",label:"Name",field:"first_name",align:"left",format:(e,t)=>`${e} ${t.last_name} ${t.middle_name||""}`},{name:"dob",label:"Date of birth",field:"dob",align:"left"},{name:"class_room",label:"Class room",field:"class_room_detail",align:"left",format:(e,t)=>{if(e)return`${e.name} ${e.stream||""}`}},{name:"action",label:"Action",field:"action",align:"left"}],students:[]}},created(){this.getStudents()},methods:{getStudents(){this.$api.get("/students/").then((e=>{this.students=e.data}))},deleteStudent(e){this.$refs.confirmDialog.show({title:"Hello",message:`Are you sure you want to delete the student "${e}"?`,okButton:"Yes, delete"}).then((t=>{t&&this.$api.delete(`/students/${e}/`).then((t=>{204==t.status&&(this.students=this.students.filter((t=>t.id!=e)))}))}))}}};var Y=a(9885),j=a(786),A=a(7220);const M=(0,g.Z)(P,[["render",d]]),R=M;k()(P,"components",{QPage:Y.Z,QTable:j.Z,QTd:A.Z,QBtn:y.Z})}}]);