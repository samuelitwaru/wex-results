"use strict";(self["webpackChunkwex_results"]=self["webpackChunkwex_results"]||[]).push([[451],{3451:(t,e,a)=>{a.r(e),a.d(e,{default:()=>C});var s=a(9835),l=a(6970);const o={class:"text-h5"},u={class:"subtitle q-mt-sm q-mb-xs"},r={class:"row"},c={class:"col-12 q-pa-sm"},i=(0,s._)("strong",null,"Subject",-1),n={align:"right"},m={class:"col-12 q-pa-sm"},d=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{class:"text-left"},"Teachers"),(0,s._)("th",{class:"text-right"})])],-1),b={class:"text-left"},h=(0,s._)("td",{class:"text-right"},null,-1),p={class:"absolute-bottom q-pa-sm",align:"right"};function g(t,e,a,g,f,j){const _=(0,s.up)("confirm-dialog"),w=(0,s.up)("q-card-section"),q=(0,s.up)("q-separator"),D=(0,s.up)("q-input"),$=(0,s.up)("q-btn"),S=(0,s.up)("q-form"),v=(0,s.up)("q-markup-table"),W=(0,s.up)("q-card"),x=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(x,null,{default:(0,s.w5)((()=>[(0,s.Wm)(_,{ref:"confirmDialog"},null,512),(0,s.Wm)(W,{class:"my-card no-borders",flat:""},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{horizontal:""},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{class:"q-pa-sm"},{default:(0,s.w5)((()=>[(0,s._)("div",o,(0,l.zw)(f.subject.name),1),(0,s._)("div",u,(0,l.zw)(f.subject.abbr),1)])),_:1})])),_:1}),(0,s.Wm)(q),(0,s._)("div",r,[(0,s._)("div",c,[i,(0,s.Wm)(S,{onSubmit:j.updateSubject,class:"q-gutter-md"},{default:(0,s.w5)((()=>[(0,s.Wm)(D,{modelValue:f.formData.name,"onUpdate:modelValue":e[0]||(e[0]=t=>f.formData.name=t),type:"text",label:"Name",required:""},null,8,["modelValue"]),(0,s.Wm)(D,{modelValue:f.formData.abbr,"onUpdate:modelValue":e[1]||(e[1]=t=>f.formData.abbr=t),type:"text",label:"Abbreviation"},null,8,["modelValue"]),(0,s._)("div",n,[(0,s.Wm)($,{label:"update",type:"submit",color:"primary"})])])),_:1},8,["onSubmit"])]),(0,s._)("div",m,[(0,s.Wm)(v,null,{default:(0,s.w5)((()=>[d,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(f.teachers,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id},[(0,s._)("td",b,(0,l.zw)(t.teacher_detail.name),1),h])))),128))])])),_:1})])])])),_:1}),(0,s._)("div",p,[(0,s.Wm)($,{color:"negative",label:"Delete","no-caps":"",dense:"",onClick:e[2]||(e[2]=t=>j.deleteSubject(f.subject.id))})])])),_:1})}var f=a(3419);const j={components:{ConfirmDialog:f.Z},data(){return{subject:{},classRooms:[],teachers:[],formData:{name:"",abbr:""}}},created(){this.getSubject(),this.getClassRooms(),this.getSubjectTeachers()},methods:{getSubject(){this.$api.get(`/subjects/${this.$route.params.id}/`).then((t=>{this.subject=t.data,console.log(this.subject),this.formData.name=this.subject.name,this.formData.abbr=this.subject.abbr}))},getSubjectTeachers(){this.$api.get(`/teacher-class-room-subjects/?subject=${this.$route.params.id}`).then((t=>{this.teachers=t.data,console.log(t.data)}))},updateSubject(){this.$api.put(`/subjects/${this.subject.id}/`,this.formData).then((t=>{this.subject=t.data,console.log(t.data)}))},deleteSubject(t){this.$refs.confirmDialog.show({title:"Hello",message:`Are you sure you want to delete the subject "${t}"?`,okButton:"Yes, delete"}).then((e=>{e&&this.$api.delete(`/subjects/${t}/`).then((t=>{204==t.status&&this.$router.push("/subjects")}))}))},getClassRooms(){this.$api.get("/class-rooms/").then((t=>{this.classRooms=t.data}))}}};var _=a(1639),w=a(9885),q=a(4458),D=a(3190),$=a(926),S=a(8326),v=a(6611),W=a(4455),x=a(6933),Z=a(9984),k=a.n(Z);const y=(0,_.Z)(j,[["render",g]]),C=y;k()(j,"components",{QPage:w.Z,QCard:q.Z,QCardSection:D.Z,QSeparator:$.Z,QForm:S.Z,QInput:v.Z,QBtn:W.Z,QMarkupTable:x.Z})}}]);