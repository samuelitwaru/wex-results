"use strict";(self["webpackChunkwex_results"]=self["webpackChunkwex_results"]||[]).push([[492],{3492:(e,t,a)=>{a.r(t),a.d(t,{default:()=>O});var s=a(9835),o=a(6970),l=a(4090),c=a.n(l);const r={class:"text-h5 q-mt-sm q-mb-xs"},m={class:"q-pa-sm",align:"right"},u={class:"row"},i={class:"col-12 q-pa-sm"},n=(0,s._)("strong",null,"Profile",-1),d={align:"right"},h={class:"col-12 q-pa-sm"},p={class:"flex justify-between q-py-sm"},b=(0,s._)("strong",{class:"q-my-auto"},"Class Subject Allocations",-1),f=(0,s._)("div",{class:"col-12 q-pa-sm"},[(0,s._)("strong",null,"User")],-1);function j(e,t,a,l,j,C){const g=(0,s.up)("confirm-dialog"),S=(0,s.up)("q-img"),w=(0,s.up)("q-card-section"),R=(0,s.up)("q-btn"),_=(0,s.up)("q-separator"),q=(0,s.up)("q-input"),W=(0,s.up)("q-form"),v=(0,s.up)("create-teacher-class-room-subject-modal"),D=(0,s.up)("update-teacher-class-room-subject-modal"),y=(0,s.up)("q-td"),Z=(0,s.up)("q-table"),$=(0,s.up)("q-card"),T=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(T,null,{default:(0,s.w5)((()=>[(0,s.Wm)(g,{ref:"confirmDialog"},null,512),(0,s.Wm)($,{class:"my-card no-borders",flat:""},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{horizontal:""},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{class:"col-3 flex flex-center"},{default:(0,s.w5)((()=>[(0,s.Wm)(S,{class:"rounded-borders",src:c(),style:{width:"100px",hieght:"100px"}})])),_:1}),(0,s.Wm)(w,{class:"q-pt-xs"},{default:(0,s.w5)((()=>[(0,s._)("div",r,(0,o.zw)(j.teacher.name),1)])),_:1})])),_:1}),(0,s._)("div",m,[(0,s.Wm)(R,{color:"negative",label:"Delete","no-caps":"",dense:"",onClick:t[0]||(t[0]=e=>C.deleteTeacher(j.teacher.id))})]),(0,s.Wm)(_),(0,s._)("div",u,[(0,s._)("div",i,[n,(0,s.Wm)(W,{onSubmit:C.updateTeacher,class:"q-gutter-md"},{default:(0,s.w5)((()=>[(0,s.Wm)(q,{modelValue:j.formData.name,"onUpdate:modelValue":t[1]||(t[1]=e=>j.formData.name=e),type:"text",label:"Name",required:""},null,8,["modelValue"]),(0,s._)("div",d,[(0,s.Wm)(R,{label:"update",type:"submit",color:"primary"})])])),_:1},8,["onSubmit"])]),(0,s._)("div",h,[(0,s._)("div",p,[b,(0,s.Wm)(v,{teacher:j.teacher,onAddTeacherClassRoomSubject:t[2]||(t[2]=e=>j.teacherClassRoomSubjects.push(e))},null,8,["teacher"])]),(0,s.Wm)(Z,{rows:j.teacherClassRoomSubjects,columns:j.columns,"row-key":"id","rows-per-page-options":[50]},{"body-cell-action":(0,s.w5)((e=>[(0,s.Wm)(y,{props:e},{default:(0,s.w5)((()=>[(0,s.Wm)(D,{teacherClassRoomSubject:e.row,teacher:j.teacher,onReplaceTeacherClassRoomSubject:t[3]||(t[3]=e=>this.replaceTeacherClassRoomSubject(e))},null,8,["teacherClassRoomSubject","teacher"]),(0,s.Wm)(R,{color:"negative","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:t=>C.deleteTeacherClassRoomSubject(e.key)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns"])]),f])])),_:1})])),_:1})}var C=a(3419);const g={style:{display:"inline"}},S={class:"text-h6"},w={class:"flex justify-between"};function R(e,t,a,l,c,r){const m=(0,s.up)("q-btn"),u=(0,s.up)("q-card-section"),i=(0,s.up)("q-select"),n=(0,s.up)("q-form"),d=(0,s.up)("q-card-actions"),h=(0,s.up)("q-card"),p=(0,s.up)("q-dialog"),b=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.iD)("div",g,[(0,s.Wm)(m,{color:"primary","icon-right":"edit",onClick:t[0]||(t[0]=e=>l.updateTeacherClassRoomSubjectModal=!0),"no-caps":"",flat:"",dense:""}),(0,s.Wm)(p,{modelValue:l.updateTeacherClassRoomSubjectModal,"onUpdate:modelValue":t[3]||(t[3]=e=>l.updateTeacherClassRoomSubjectModal=e)},{default:(0,s.w5)((()=>[(0,s.Wm)(h,{style:{width:"700px","max-width":"80vw"}},{default:(0,s.w5)((()=>[(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s._)("div",S,' Update Class Subject Allocation for "'+(0,o.zw)(a.teacher.name)+'" ',1)])),_:1}),(0,s.Wm)(u,{class:"q-pt-none"},{default:(0,s.w5)((()=>[(0,s.Wm)(n,{onSubmit:r.updateClassRoomSubject,class:"q-gutter-md"},{default:(0,s.w5)((()=>[(0,s.Wm)(i,{outlined:"",modelValue:c.formData.class_room,"onUpdate:modelValue":t[1]||(t[1]=e=>c.formData.class_room=e),"option-label":"name","option-value":"id",options:c.classRooms,label:"Class Room","emit-value":"","map-options":""},null,8,["modelValue","options"]),(0,s.Wm)(i,{outlined:"",modelValue:c.formData.subject,"onUpdate:modelValue":t[2]||(t[2]=e=>c.formData.subject=e),"option-label":"name","option-value":"id",options:c.subjects,label:"Subject","emit-value":"","map-options":""},null,8,["modelValue","options"]),(0,s._)("div",w,[(0,s._)("div",null,[(0,s.wy)((0,s.Wm)(m,{flat:"",color:"primary",label:"Cancel"},null,512),[[b]])]),(0,s.Wm)(m,{label:"Submit",type:"submit",color:"primary"})])])),_:1},8,["onSubmit"])])),_:1}),(0,s.Wm)(d,{align:"right",class:"bg-white text-teal"})])),_:1})])),_:1},8,["modelValue"])])}var _=a(499);const q={props:["teacherClassRoomSubject","teacher"],setup(){return{updateTeacherClassRoomSubjectModal:(0,_.iH)(!1)}},data(){return{classRooms:[],subjects:[],formData:{class_room:this.teacherClassRoomSubject.class_room,subject:this.teacherClassRoomSubject.subject}}},created(){this.getClassRooms(),this.getSubjects()},methods:{getClassRooms(){this.$api.get("/class-rooms/").then((e=>{this.classRooms=e.data}))},getSubjects(){this.$api.get("/subjects/").then((e=>{this.subjects=e.data}))},updateClassRoomSubject(){this.formData.teacher=this.teacher.id,console.log(this.formData),this.$api.put(`/teacher-class-room-subjects/${this.teacherClassRoomSubject.id}/`,this.formData).then((e=>{this.$emit("replaceTeacherClassRoomSubject",e.data),this.updateTeacherClassRoomSubjectModal=!1}))}}};var W=a(1639),v=a(4455),D=a(2074),y=a(4458),Z=a(3190),$=a(8326),T=a(9812),Q=a(1821),x=a(2146),V=a(9984),k=a.n(V);const A=(0,W.Z)(q,[["render",R]]),U=A;k()(q,"components",{QBtn:v.Z,QDialog:D.Z,QCard:y.Z,QCardSection:Z.Z,QForm:$.Z,QSelect:T.Z,QCardActions:Q.Z}),k()(q,"directives",{ClosePopup:x.Z});const M={class:"text-h6"},B={class:"flex justify-between"};function z(e,t,a,l,c,r){const m=(0,s.up)("q-btn"),u=(0,s.up)("q-card-section"),i=(0,s.up)("q-select"),n=(0,s.up)("q-form"),d=(0,s.up)("q-card-actions"),h=(0,s.up)("q-card"),p=(0,s.up)("q-dialog"),b=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(m,{icon:"add",color:"primary",onClick:t[0]||(t[0]=e=>l.medium=!0)}),(0,s.Wm)(p,{modelValue:l.medium,"onUpdate:modelValue":t[3]||(t[3]=e=>l.medium=e)},{default:(0,s.w5)((()=>[(0,s.Wm)(h,{style:{width:"700px","max-width":"80vw"}},{default:(0,s.w5)((()=>[(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s._)("div",M,' New Class Subject Allocation for "'+(0,o.zw)(a.teacher.name)+'" ',1)])),_:1}),(0,s.Wm)(u,{class:"q-pt-none"},{default:(0,s.w5)((()=>[(0,s.Wm)(n,{onSubmit:r.createTeacherClassRoomSubject,class:"q-gutter-md"},{default:(0,s.w5)((()=>[(0,s.Wm)(i,{outlined:"",modelValue:c.formData.class_room,"onUpdate:modelValue":t[1]||(t[1]=e=>c.formData.class_room=e),"option-label":e=>`${e.name} ${e.stream}`,"option-value":"id",options:c.classRooms,label:"Class","emit-value":"","map-options":""},null,8,["modelValue","option-label","options"]),(0,s.Wm)(i,{outlined:"",modelValue:c.formData.subject,"onUpdate:modelValue":t[2]||(t[2]=e=>c.formData.subject=e),"option-label":"name","option-value":"id",options:c.subjects,label:"Subject","emit-value":"","map-options":""},null,8,["modelValue","options"]),(0,s._)("div",B,[(0,s._)("div",null,[(0,s.wy)((0,s.Wm)(m,{flat:"",color:"primary",label:"Cancel"},null,512),[[b]])]),(0,s.Wm)(m,{label:"Submit",type:"submit",color:"primary"})])])),_:1},8,["onSubmit"])])),_:1}),(0,s.Wm)(d,{align:"right",class:"bg-white text-teal"})])),_:1})])),_:1},8,["modelValue"])])}const P={props:["teacher"],setup(){return{medium:(0,_.iH)(!1)}},data(){return{classRooms:[],subjects:[],formData:{class_room:null,subject:null}}},created(){this.getClassRooms(),this.getSubjects()},methods:{getClassRooms(){this.$api.get("/class-rooms/").then((e=>{this.classRooms=e.data}))},getSubjects(){this.$api.get("/subjects/").then((e=>{this.subjects=e.data}))},createTeacherClassRoomSubject(){this.formData.teacher=this.teacher.id,console.log(this.formData),this.$api.post("/teacher-class-room-subjects/",this.formData).then((e=>{this.$emit("addTeacherClassRoomSubject",e.data),this.medium=!1}))}}},F=(0,W.Z)(P,[["render",z]]),I=F;k()(P,"components",{QBtn:v.Z,QDialog:D.Z,QCard:y.Z,QCardSection:Z.Z,QForm:$.Z,QSelect:T.Z,QCardActions:Q.Z}),k()(P,"directives",{ClosePopup:x.Z});const H={components:{ConfirmDialog:C.Z,UpdateTeacherClassRoomSubjectModal:U,CreateTeacherClassRoomSubjectModal:I},data(){return{teacher:{},teacherClassRoomSubjects:[],formData:{name:""},formData2:{classRoom:""},columns:[{name:"class_room",field:"class_room_detail",label:"Class Room",align:"left",format:(e,t)=>`${e.name} ${e.stream}`},{name:"subject",field:"subject_detail",label:"Subject",align:"left",format:(e,t)=>e.name},{name:"action",label:"Action"}]}},created(){this.getTeacher(),this.getTeacherClassRoomSubjects()},methods:{getTeacher(){this.$api.get(`/teachers/${this.$route.params.id}/`).then((e=>{this.teacher=e.data,this.formData.name=this.teacher.name}))},updateTeacher(){this.$api.put(`/teachers/${this.teacher.id}/`,this.formData).then((e=>{this.teacher=e.data}))},deleteTeacher(e){this.$refs.confirmDialog.show({title:"Delete Teacher",message:`Are you sure you want to delete the teacher "${e}"?`,okButton:"Yes, delete"}).then((t=>{t&&this.$api.delete(`/teachers/${e}/`).then((e=>{204==e.status&&this.$router.push("/teachers")}))}))},getTeacherClassRoomSubjects(){this.$api.get(`/teacher-class-room-subjects/?teacher=${this.$route.params.id}`).then((e=>{this.teacherClassRoomSubjects=e.data}))},deleteTeacherClassRoomSubject(e){this.$refs.confirmDialog.show({title:"Delete Class Subject Allocation",message:`Are you sure you want to delete the Allocation "${e}"?`,okButton:"Yes, delete"}).then((t=>{t&&this.$api.delete(`/teacher-class-room-subjects/${e}/`).then((t=>{204==t.status&&(console.log(t.data),this.teacherClassRoomSubjects=this.teacherClassRoomSubjects.filter((t=>t.id!=e)))}))}))},replaceTeacherClassRoomSubject(e){var t=this.teacherClassRoomSubjects.findIndex((t=>t.id==e.id));this.teacherClassRoomSubjects[t]=e}}};var N=a(9885),Y=a(335),E=a(926),G=a(6611),J=a(786),K=a(7220);const L=(0,W.Z)(H,[["render",j]]),O=L;k()(H,"components",{QPage:N.Z,QCard:y.Z,QCardSection:Z.Z,QImg:Y.Z,QBtn:v.Z,QSeparator:E.Z,QForm:$.Z,QInput:G.Z,QTable:J.Z,QTd:K.Z})}}]);