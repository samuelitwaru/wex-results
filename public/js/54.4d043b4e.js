"use strict";(self["webpackChunkwex_results"]=self["webpackChunkwex_results"]||[]).push([[54],{5054:(t,e,a)=>{a.r(e),a.d(e,{default:()=>U});var s=a(9835),l=a(6970),o=a(4090),d=a.n(o);const n={class:"text-h5 q-mt-sm q-mb-xs"},m={key:0},r=(0,s._)("label",{class:"text-grey-8"},"Date of Birth",-1),i={class:"row q-pa-xs rounded-borders",style:{border:"1px solid #dddddd"}},u={class:"col-9 q-my-auto"},c={class:"col-3",align:"right"},p={class:"row items-center justify-end q-gutter-sm"},f={align:"right"};function h(t,e,a,o,h,_){const w=(0,s.up)("confirm-dialog"),g=(0,s.up)("q-img"),b=(0,s.up)("q-card-section"),D=(0,s.up)("q-btn"),q=(0,s.up)("q-card-actions"),y=(0,s.up)("q-separator"),W=(0,s.up)("q-input"),v=(0,s.up)("q-date"),x=(0,s.up)("q-popup-proxy"),V=(0,s.up)("q-select"),Z=(0,s.up)("q-form"),Q=(0,s.up)("q-card"),C=(0,s.up)("q-page"),S=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.j4)(C,null,{default:(0,s.w5)((()=>[(0,s.Wm)(w,{ref:"confirmDialog"},null,512),(0,s.Wm)(Q,{class:"my-card no-borders",flat:""},{default:(0,s.w5)((()=>[(0,s.Wm)(b,{horizontal:""},{default:(0,s.w5)((()=>[(0,s.Wm)(b,{class:"col-3 flex flex-center"},{default:(0,s.w5)((()=>[(0,s.Wm)(g,{class:"rounded-borders",src:d(),style:{width:"100px",hieght:"100px"}})])),_:1}),(0,s.Wm)(b,{class:"q-pt-xs"},{default:(0,s.w5)((()=>[(0,s._)("div",n,(0,l.zw)(h.student.first_name)+" "+(0,l.zw)(h.student.last_name)+" "+(0,l.zw)(h.student.middle_name),1),(0,s._)("div",null,(0,l.zw)(h.student.dob),1),h.student.class_room?((0,s.wg)(),(0,s.iD)("div",m,(0,l.zw)(h.student.class_room_detail.name)+" "+(0,l.zw)(h.student.class_room_detail.stream),1)):(0,s.kq)("",!0)])),_:1})])),_:1}),(0,s.Wm)(q,{align:"right"},{default:(0,s.w5)((()=>[(0,s.Wm)(D,{color:"negative",label:"Delete","no-caps":"",dense:"",onClick:e[0]||(e[0]=t=>_.deleteStudent(h.student.id))})])),_:1}),(0,s.Wm)(y),(0,s.Wm)(Z,{onSubmit:_.updateStudent,class:"q-gutter-md q-pa-sm"},{default:(0,s.w5)((()=>[(0,s.Wm)(W,{modelValue:h.formData.first_name,"onUpdate:modelValue":e[1]||(e[1]=t=>h.formData.first_name=t),type:"text",label:"First Name",required:""},null,8,["modelValue"]),(0,s.Wm)(W,{modelValue:h.formData.last_name,"onUpdate:modelValue":e[2]||(e[2]=t=>h.formData.last_name=t),type:"text",label:"Last Name",required:""},null,8,["modelValue"]),(0,s.Wm)(W,{modelValue:h.formData.middle_name,"onUpdate:modelValue":e[3]||(e[3]=t=>h.formData.middle_name=t),type:"text",label:"Middle Name"},null,8,["modelValue"]),(0,s._)("div",null,[r,(0,s._)("div",i,[(0,s._)("div",u,(0,l.zw)(h.formData.dob),1),(0,s._)("div",c,[(0,s.Wm)(D,{col:"2",icon:"event",round:"",color:"primary"},{default:(0,s.w5)((()=>[(0,s.Wm)(x,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,s.w5)((()=>[(0,s.Wm)(v,{modelValue:h.formData.dob,"onUpdate:modelValue":e[4]||(e[4]=t=>h.formData.dob=t),mask:"YYYY-MM-DD",title:h.formData.dob,subtitle:"Date of Birth","years-in-month-view":""},{default:(0,s.w5)((()=>[(0,s._)("div",p,[(0,s.wy)((0,s.Wm)(D,{label:"Cancel",color:"primary",flat:""},null,512),[[S]]),(0,s.wy)((0,s.Wm)(D,{label:"OK",color:"primary",flat:""},null,512),[[S]])])])),_:1},8,["modelValue","title"])])),_:1})])),_:1})])])]),(0,s.Wm)(V,{outlined:"",modelValue:h.formData.class_room,"onUpdate:modelValue":e[5]||(e[5]=t=>h.formData.class_room=t),"option-label":"name","option-value":"id",options:h.classRooms,label:"Class Room","emit-value":"","map-options":""},null,8,["modelValue","options"]),(0,s._)("div",f,[(0,s.Wm)(D,{label:"update",type:"submit",color:"primary"})])])),_:1},8,["onSubmit"])])),_:1})])),_:1})}var _=a(3419);const w={components:{ConfirmDialog:_.Z},data(){return{student:{},classRooms:[],formData:{first_name:"",last_name:"",middle_name:"",dob:null,class_room:{}}}},created(){this.getStudent(),this.getClassRooms()},methods:{getStudent(){this.$api.get(`/students/${this.$route.params.id}/`).then((t=>{this.student=t.data,this.formData.first_name=this.student.first_name,this.formData.last_name=this.student.last_name,this.formData.middle_name=this.student.middle_name,this.formData.dob=this.student.dob,this.formData.class_room=this.student.class_room,console.log(this.student)}))},updateStudent(){console.log(this.formData),this.$api.put(`/students/${this.student.id}/`,this.formData).then((t=>{this.student=t.data,console.log(t.data)}))},deleteStudent(t){this.$refs.confirmDialog.show({title:"Hello",message:`Are you sure you want to delete the student "${t}"?`,okButton:"Yes, delete"}).then((e=>{e&&this.$api.delete(`/students/${t}/`).then((t=>{204==t.status&&this.$router.push("/students")}))}))},getClassRooms(){this.$api.get("/class-rooms/").then((t=>{this.classRooms=t.data}))}}};var g=a(1639),b=a(9885),D=a(4458),q=a(3190),y=a(335),W=a(1821),v=a(4455),x=a(926),V=a(8326),Z=a(6611),Q=a(2765),C=a(6711),S=a(9812),$=a(2146),k=a(9984),z=a.n(k);const R=(0,g.Z)(w,[["render",h]]),U=R;z()(w,"components",{QPage:b.Z,QCard:D.Z,QCardSection:q.Z,QImg:y.Z,QCardActions:W.Z,QBtn:v.Z,QSeparator:x.Z,QForm:V.Z,QInput:Z.Z,QPopupProxy:Q.Z,QDate:C.Z,QSelect:S.Z}),z()(w,"directives",{ClosePopup:$.Z})}}]);