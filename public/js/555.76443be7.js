"use strict";(self["webpackChunkwex_results"]=self["webpackChunkwex_results"]||[]).push([[555],{3555:(e,s,t)=>{t.r(s),t.d(s,{default:()=>M});var a=t(9835);const l={class:"q-pa-sm"},o={class:"flex justify-between q-py-sm"},n=(0,a._)("label",{class:"text-h4"},"Assessments",-1);function m(e,s,t,m,i,r){const u=(0,a.up)("confirm-dialog"),d=(0,a.up)("create-assessment-modal"),c=(0,a.up)("q-btn"),p=(0,a.up)("router-link"),f=(0,a.up)("q-td"),h=(0,a.up)("q-table"),b=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(b,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,{ref:"confirmDialog"},null,512),(0,a._)("div",l,[(0,a._)("div",o,[n,(0,a.Wm)(d,{onAddAssessment:s[0]||(s[0]=e=>i.assessments.push(e))})]),(0,a.Wm)(h,{rows:i.assessments,columns:i.columns,"row-key":"id","rows-per-page-options":[50]},{"body-cell-action":(0,a.w5)((e=>[(0,a.Wm)(f,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{class:"text-white",to:`/assessments/${e.key}`},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{color:"primary","icon-right":"edit","no-caps":"",flat:"",dense:""})])),_:2},1032,["to"]),(0,a.Wm)(c,{color:"negative","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:s=>r.deleteAssessment(e.key)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns"])])])),_:1})}var i=t(6970);const r=(0,a._)("div",{class:"text-h6"},"New Assessment",-1),u=(0,a._)("label",{class:"text-grey-8"},"Date",-1),d={class:"row q-pa-xs rounded-borders",style:{border:"1px solid #dddddd"}},c={class:"col-9 q-my-auto"},p={class:"col-3",align:"right"},f={class:"row items-center justify-end q-gutter-sm"},h={class:"flex justify-between"};function b(e,s,t,l,o,n){const m=(0,a.up)("q-btn"),b=(0,a.up)("q-card-section"),g=(0,a.up)("q-date"),w=(0,a.up)("q-popup-proxy"),_=(0,a.up)("q-input"),v=(0,a.up)("q-select"),y=(0,a.up)("q-form"),D=(0,a.up)("q-card-actions"),W=(0,a.up)("q-card"),q=(0,a.up)("q-dialog"),V=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(m,{label:"New Assessment",icon:"add",color:"primary",onClick:s[0]||(s[0]=e=>l.medium=!0)}),(0,a.Wm)(q,{modelValue:l.medium,"onUpdate:modelValue":s[6]||(s[6]=e=>l.medium=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(W,{style:{width:"700px","max-width":"80vw"}},{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[r])),_:1}),(0,a.Wm)(b,{class:"q-pt-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{onSubmit:n.createAssessment,class:"q-gutter-md"},{default:(0,a.w5)((()=>[(0,a._)("div",null,[u,(0,a._)("div",d,[(0,a._)("div",c,(0,i.zw)(o.formData.date),1),(0,a._)("div",p,[(0,a.Wm)(m,{col:"2",icon:"event",round:"",color:"primary"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{modelValue:o.formData.date,"onUpdate:modelValue":s[1]||(s[1]=e=>o.formData.date=e),mask:"YYYY-MM-DD",title:o.formData.date,subtitle:"Date of Birth","years-in-month-view":""},{default:(0,a.w5)((()=>[(0,a._)("div",f,[(0,a.wy)((0,a.Wm)(m,{label:"Cancel",color:"primary",flat:""},null,512),[[V]]),(0,a.wy)((0,a.Wm)(m,{label:"OK",color:"primary",flat:""},null,512),[[V]])])])),_:1},8,["modelValue","title"])])),_:1})])),_:1})])])]),(0,a.Wm)(_,{modelValue:o.formData.term,"onUpdate:modelValue":s[2]||(s[2]=e=>o.formData.term=e),modelModifiers:{number:!0},type:"number",label:"Term",required:""},null,8,["modelValue"]),(0,a.Wm)(v,{outlined:"",modelValue:o.formData.class_room,"onUpdate:modelValue":s[3]||(s[3]=e=>o.formData.class_room=e),"option-label":e=>`${e.name} ${e.stream}`,"option-value":"id",options:o.classRooms,label:"Class","emit-value":"","map-options":""},null,8,["modelValue","option-label","options"]),(0,a.Wm)(v,{outlined:"",modelValue:o.formData.subject,"onUpdate:modelValue":s[4]||(s[4]=e=>o.formData.subject=e),"option-label":"name","option-value":"id",options:o.subjects,label:"Subject","emit-value":"","map-options":""},null,8,["modelValue","options"]),(0,a.Wm)(v,{outlined:"",modelValue:o.formData.teacher,"onUpdate:modelValue":s[5]||(s[5]=e=>o.formData.teacher=e),"option-label":"name","option-value":"id",options:o.teachers,label:"Teacher","emit-value":"","map-options":""},null,8,["modelValue","options"]),(0,a._)("div",h,[(0,a._)("div",null,[(0,a.wy)((0,a.Wm)(m,{flat:"",color:"primary",label:"Cancel"},null,512),[[V]])]),(0,a.Wm)(m,{label:"Submit",type:"submit",color:"primary"})])])),_:1},8,["onSubmit"])])),_:1}),(0,a.Wm)(D,{align:"right",class:"bg-white text-teal"})])),_:1})])),_:1},8,["modelValue"])])}var g=t(499);const w={props:["assessments"],setup(){return{medium:(0,g.iH)(!1)}},data(){return{teachers:[],classRooms:[],subjects:[],formData:{date:null,teacher:null,class_room:null,term:null,subject:null}}},created(){this.getTeachers(),this.getClassRooms(),this.getSubjects()},methods:{createAssessment(){this.$api.post("/assessments/",this.formData).then((e=>{this.$emit("addAssessment",e.data),this.medium=!1}))},getTeachers(){this.$api.get("/teachers/").then((e=>{this.teachers=e.data}))},getSubjects(){this.$api.get("/subjects/").then((e=>{this.subjects=e.data}))},getClassRooms(){this.$api.get("/class-rooms/").then((e=>{this.classRooms=e.data}))}}};var _=t(1639),v=t(4455),y=t(2074),D=t(4458),W=t(3190),q=t(8326),V=t(2765),Z=t(6711),A=t(6611),C=t(9812),$=t(1821),x=t(2146),Q=t(9984),j=t.n(Q);const k=(0,_.Z)(w,[["render",b]]),S=k;j()(w,"components",{QBtn:v.Z,QDialog:y.Z,QCard:D.Z,QCardSection:W.Z,QForm:q.Z,QPopupProxy:V.Z,QDate:Z.Z,QInput:A.Z,QSelect:C.Z,QCardActions:$.Z}),j()(w,"directives",{ClosePopup:x.Z});var T=t(3419);const U={components:{CreateAssessmentModal:S,ConfirmDialog:T.Z},name:"AssessmentsPage",data(){return{columns:[{name:"date",label:"Date",field:"date",align:"left"},{name:"term",label:"Term",field:"term",align:"left"},{name:"class_room",label:"Class",field:"class_room_detail",align:"left",format:(e,s)=>{if(e)return`${e.name} ${e.stream}`}},{name:"teacher",label:"Teacher",field:"teacher_detail",align:"left",format:(e,s)=>{if(e)return`${e.name}`}},{name:"action",label:"Action",field:"action",align:"left"}],assessments:[]}},created(){this.getAssessments()},methods:{getAssessments(){this.$api.get("/assessments/").then((e=>{this.assessments=e.data,console.log(this.assessments)}))},deleteAssessment(e){this.$refs.confirmDialog.show({title:"Hello",message:`Are you sure you want to delete the assessment "${e}"?`,okButton:"Yes, delete"}).then((s=>{s&&this.$api.delete(`/assessments/${e}/`).then((s=>{204==s.status&&(this.assessments=this.assessments.filter((s=>s.id!=e)))}))}))}}};var P=t(9885),R=t(786),Y=t(7220);const B=(0,_.Z)(U,[["render",m]]),M=B;j()(U,"components",{QPage:P.Z,QTable:R.Z,QTd:Y.Z,QBtn:v.Z})}}]);