"use strict";(self["webpackChunkwex_results"]=self["webpackChunkwex_results"]||[]).push([[744],{744:(e,a,t)=>{t.r(a),t.d(a,{default:()=>re});var l=t(9835),r=t(6970);const s={class:"text-h5 q-mt-sm q-mb-xs"},d={class:"q-pa-sm",align:"right"},o={class:"q-pa-sm col-md-6"},i=(0,l._)("strong",null,"Grading system",-1),m={align:"right"},n={class:"q-pa-sm col-md-6"},u={class:"q-py-sm flex justify-between"},g=(0,l._)("strong",{class:"q-my-auto"},"Grades",-1);function p(e,a,t,p,c,y){const f=(0,l.up)("confirm-dialog"),_=(0,l.up)("q-card-section"),h=(0,l.up)("q-btn"),b=(0,l.up)("q-separator"),w=(0,l.up)("q-input"),q=(0,l.up)("q-form"),D=(0,l.up)("create-grade-modal"),W=(0,l.up)("update-grade-modal"),V=(0,l.up)("q-td"),v=(0,l.up)("q-table"),x=(0,l.up)("q-card"),k=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(k,null,{default:(0,l.w5)((()=>[(0,l.Wm)(f,{ref:"confirmDialog"},null,512),(0,l.Wm)(x,{class:"my-card no-borders",flat:""},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{horizontal:""},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{class:"q-pt-xs"},{default:(0,l.w5)((()=>[(0,l._)("div",s,(0,r.zw)(c.grading_system.name),1),(0,l._)("div",null,(0,r.zw)(c.grading_system.description),1)])),_:1})])),_:1}),(0,l._)("div",d,[(0,l.Wm)(h,{color:"negative",label:"Delete","no-caps":"",dense:"",onClick:a[0]||(a[0]=e=>y.deleteGradingSystem(c.grading_system.id))})]),(0,l.Wm)(b),(0,l._)("div",null,[(0,l._)("div",o,[i,(0,l.Wm)(q,{onSubmit:y.updateGradingSystem,class:"q-gutter-md"},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{modelValue:c.formData.name,"onUpdate:modelValue":a[1]||(a[1]=e=>c.formData.name=e),type:"text",label:"Name",required:""},null,8,["modelValue"]),(0,l.Wm)(w,{modelValue:c.formData.description,"onUpdate:modelValue":a[2]||(a[2]=e=>c.formData.description=e),type:"text",label:"Description"},null,8,["modelValue"]),(0,l._)("div",m,[(0,l.Wm)(h,{label:"update",type:"submit",color:"primary"})])])),_:1},8,["onSubmit"])]),(0,l._)("div",n,[(0,l._)("div",u,[g,(0,l.Wm)(D,{grading_system:c.grading_system,onAddGrade:a[3]||(a[3]=e=>this.grading_system.grades.push(e))},null,8,["grading_system"])]),(0,l.Wm)(v,{rows:c.grading_system.grades,columns:c.columns,"row-key":"id","rows-per-page-options":[50]},{"body-cell-action":(0,l.w5)((e=>[(0,l.Wm)(V,{props:e},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{grade:e.row,grading_system:c.grading_system,onReplaceGrade:a[4]||(a[4]=e=>this.replaceGrade(e))},null,8,["grade","grading_system"]),(0,l.Wm)(h,{color:"negative","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:a=>y.deleteGrade(e.key)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns"])])])])),_:1})])),_:1})}var c=t(3419);const y={class:"text-h6"},f={class:"row"},_={class:"col q-px-1"},h={class:"col q-px-1"},b={class:"row"},w={class:"col q-px-1"},q={class:"col q-px-1"},D={class:"flex justify-between"};function W(e,a,t,s,d,o){const i=(0,l.up)("q-btn"),m=(0,l.up)("q-card-section"),n=(0,l.up)("q-input"),u=(0,l.up)("q-form"),g=(0,l.up)("q-card-actions"),p=(0,l.up)("q-card"),c=(0,l.up)("q-dialog"),W=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(i,{label:"New Grade",icon:"add",color:"primary",onClick:a[0]||(a[0]=e=>s.medium=!0)}),(0,l.Wm)(c,{modelValue:s.medium,"onUpdate:modelValue":a[6]||(a[6]=e=>s.medium=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{style:{width:"700px","max-width":"80vw"}},{default:(0,l.w5)((()=>[(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l._)("div",y,'New Grade for "'+(0,r.zw)(t.grading_system.name)+'"',1)])),_:1}),(0,l.Wm)(m,{class:"q-pt-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{onSubmit:o.createGrade,class:"q-gutter-md"},{default:(0,l.w5)((()=>[(0,l.Wm)(n,{modelValue:d.formData.category,"onUpdate:modelValue":a[1]||(a[1]=e=>d.formData.category=e),type:"text",label:"Category",required:""},null,8,["modelValue"]),(0,l._)("div",f,[(0,l._)("div",_,[(0,l.Wm)(n,{modelValue:d.formData.min_mark,"onUpdate:modelValue":a[2]||(a[2]=e=>d.formData.min_mark=e),type:"number",label:"Min Mark",required:""},null,8,["modelValue"])]),(0,l._)("div",h,[(0,l.Wm)(n,{modelValue:d.formData.max_mark,"onUpdate:modelValue":a[3]||(a[3]=e=>d.formData.max_mark=e),type:"number",label:"Max Mark",required:""},null,8,["modelValue"])])]),(0,l._)("div",b,[(0,l._)("div",w,[(0,l.Wm)(n,{modelValue:d.formData.aggregates,"onUpdate:modelValue":a[4]||(a[4]=e=>d.formData.aggregates=e),type:"number",label:"Aggregates",required:""},null,8,["modelValue"])]),(0,l._)("div",q,[(0,l.Wm)(n,{modelValue:d.formData.points,"onUpdate:modelValue":a[5]||(a[5]=e=>d.formData.points=e),type:"number",label:"Points",required:""},null,8,["modelValue"])])]),(0,l._)("div",D,[(0,l._)("div",null,[(0,l.wy)((0,l.Wm)(i,{flat:"",color:"primary",label:"Cancel"},null,512),[[W]])]),(0,l.Wm)(i,{label:"Submit",type:"submit",color:"primary"})])])),_:1},8,["onSubmit"])])),_:1}),(0,l.Wm)(g,{align:"right",class:"bg-white text-teal"})])),_:1})])),_:1},8,["modelValue"])])}var V=t(499);const v={props:["grading_system"],setup(){return{small:(0,V.iH)(!1),medium:(0,V.iH)(!1),fullWidth:(0,V.iH)(!1),fullHeight:(0,V.iH)(!1)}},data(){return{formData:{category:"",min_mark:"",max_mark:"",aggregates:"",points:""}}},created(){},methods:{createGrade(){this.formData.grading_system=this.grading_system.id,console.log(this.formData),this.$api.post("/grades/",this.formData).then((e=>{this.$emit("addGrade",e.data),this.medium=!1}))}}};var x=t(1639),k=t(4455),G=t(2074),Z=t(4458),Q=t(3190),C=t(8326),$=t(6611),S=t(1821),U=t(2146),M=t(9984),A=t.n(M);const H=(0,x.Z)(v,[["render",W]]),z=H;A()(v,"components",{QBtn:k.Z,QDialog:G.Z,QCard:Z.Z,QCardSection:Q.Z,QForm:C.Z,QInput:$.Z,QCardActions:S.Z}),A()(v,"directives",{ClosePopup:U.Z});const P={style:{display:"inline"}},B={class:"text-h6"},j={class:"row"},I={class:"col q-px-1"},F={class:"col q-px-1"},N={class:"row"},R={class:"col q-px-1"},T={class:"col q-px-1"},Y={class:"flex justify-between"};function E(e,a,t,s,d,o){const i=(0,l.up)("q-btn"),m=(0,l.up)("q-card-section"),n=(0,l.up)("q-input"),u=(0,l.up)("q-form"),g=(0,l.up)("q-card-actions"),p=(0,l.up)("q-card"),c=(0,l.up)("q-dialog"),y=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)("div",P,[(0,l.Wm)(i,{color:"primary","icon-right":"edit",onClick:a[0]||(a[0]=e=>s.updateGradeModal=!0),"no-caps":"",flat:"",dense:""}),(0,l.Wm)(c,{modelValue:s.updateGradeModal,"onUpdate:modelValue":a[6]||(a[6]=e=>s.updateGradeModal=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{style:{width:"700px","max-width":"80vw"}},{default:(0,l.w5)((()=>[(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l._)("div",B,' Update Grade "'+(0,r.zw)(t.grade.category)+'" for "'+(0,r.zw)(t.grading_system.name)+'" ',1)])),_:1}),(0,l.Wm)(m,{class:"q-pt-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{onSubmit:o.updateGrade,class:"q-gutter-md"},{default:(0,l.w5)((()=>[(0,l.Wm)(n,{modelValue:d.formData.category,"onUpdate:modelValue":a[1]||(a[1]=e=>d.formData.category=e),type:"text",label:"Category",required:""},null,8,["modelValue"]),(0,l._)("div",j,[(0,l._)("div",I,[(0,l.Wm)(n,{modelValue:d.formData.min_mark,"onUpdate:modelValue":a[2]||(a[2]=e=>d.formData.min_mark=e),type:"number",label:"Min Mark",required:""},null,8,["modelValue"])]),(0,l._)("div",F,[(0,l.Wm)(n,{modelValue:d.formData.max_mark,"onUpdate:modelValue":a[3]||(a[3]=e=>d.formData.max_mark=e),type:"number",label:"Max Mark",required:""},null,8,["modelValue"])])]),(0,l._)("div",N,[(0,l._)("div",R,[(0,l.Wm)(n,{modelValue:d.formData.aggregates,"onUpdate:modelValue":a[4]||(a[4]=e=>d.formData.aggregates=e),type:"number",label:"Aggregates",required:""},null,8,["modelValue"])]),(0,l._)("div",T,[(0,l.Wm)(n,{modelValue:d.formData.points,"onUpdate:modelValue":a[5]||(a[5]=e=>d.formData.points=e),type:"number",label:"Points",required:""},null,8,["modelValue"])])]),(0,l._)("div",Y,[(0,l._)("div",null,[(0,l.wy)((0,l.Wm)(i,{flat:"",color:"primary",label:"Cancel"},null,512),[[y]])]),(0,l.Wm)(i,{label:"Submit",type:"submit",color:"primary"})])])),_:1},8,["onSubmit"])])),_:1}),(0,l.Wm)(g,{align:"right",class:"bg-white text-teal"})])),_:1})])),_:1},8,["modelValue"])])}const J={props:["grade","grading_system"],setup(){return{updateGradeModal:(0,V.iH)(!1)}},data(){return{formData:{category:this.grade.category,min_mark:this.grade.min_mark,max_mark:this.grade.max_mark,aggregates:this.grade.aggregates,points:this.grade.points}}},created(){},methods:{updateGrade(){this.formData.grading_system=this.grading_system.id,console.log(this.formData),this.$api.put(`/grades/${this.grade.id}/`,this.formData).then((e=>{this.$emit("replaceGrade",e.data),this.updateGradeModal=!1}))}}},K=(0,x.Z)(J,[["render",E]]),L=K;A()(J,"components",{QBtn:k.Z,QDialog:G.Z,QCard:Z.Z,QCardSection:Q.Z,QForm:C.Z,QInput:$.Z,QCardActions:S.Z}),A()(J,"directives",{ClosePopup:U.Z});const O={components:{ConfirmDialog:c.Z,CreateGradeModal:z,UpdateGradeModal:L},data(){return{columns:[{name:"category",label:"Category",field:"category",align:"left"},{name:"range",label:"Range",field:"min_mark",format:(e,a)=>`${e} - ${a.max_mark}`,align:"left"},{name:"points",label:"Points",field:"points",align:"left"},{name:"aggregates",label:"Aggregates",field:"aggregates",align:"left"},{name:"action",label:"Action",field:"action",align:"left"}],grading_system:{},grading_systems:[],teachers:[],formData:{name:"",description:""}}},created(){this.getGradingSystem()},methods:{getGradingSystem(){this.$api.get(`/grading-systems/${this.$route.params.id}/`).then((e=>{this.grading_system=e.data,console.log(this.grading_system),this.formData.name=this.grading_system.name,this.formData.description=this.grading_system.description}))},updateGradingSystem(){this.$api.put(`/grading-systems/${this.grading_system.id}/`,this.formData).then((e=>{this.grading_system=e.data}))},deleteGradingSystem(e){this.$refs.confirmDialog.show({title:"Hello",message:`Are you sure you want to delete the grading system "${e}"?`,okButton:"Yes, delete"}).then((a=>{a&&this.$api.delete(`/grading-systems/${e}/`).then((e=>{204==e.status&&this.$router.push("/grading-systems")}))}))},deleteGrade(e){this.$refs.confirmDialog.show({title:"Delete Grade",message:`Are you sure you want to delete the grade "${e}"?`,okButton:"Yes, delete"}).then((a=>{a&&this.$api.delete(`/grades/${e}/`).then((a=>{204==a.status&&(console.log(a.data),this.grading_system.grades=this.grading_system.grades.filter((a=>a.id!=e)))}))}))},getGradingSystems(){this.$api.get("/grading-systems/").then((e=>{this.classRooms=e.data}))},replaceGrade(e){var a=this.grading_system.grades.findIndex((a=>a.id==e.id));this.grading_system.grades[a]=e}}};var X=t(9885),ee=t(926),ae=t(786),te=t(7220);const le=(0,x.Z)(O,[["render",p]]),re=le;A()(O,"components",{QPage:X.Z,QCard:Z.Z,QCardSection:Q.Z,QBtn:k.Z,QSeparator:ee.Z,QForm:C.Z,QInput:$.Z,QTable:ae.Z,QTd:te.Z})}}]);