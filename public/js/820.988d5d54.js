"use strict";(self["webpackChunkwex_results"]=self["webpackChunkwex_results"]||[]).push([[820],{1820:(e,t,a)=>{a.r(t),a.d(t,{default:()=>V});var s=a(9835);const l={class:"q-pa-sm"},o={class:"flex justify-between q-py-sm"},u=(0,s._)("label",{class:"text-h4"},"Subjects",-1);function n(e,t,a,n,i,r){const c=(0,s.up)("confirm-dialog"),m=(0,s.up)("create-subject-modal"),d=(0,s.up)("q-btn"),p=(0,s.up)("router-link"),b=(0,s.up)("q-td"),f=(0,s.up)("q-table"),h=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(h,null,{default:(0,s.w5)((()=>[(0,s.Wm)(c,{ref:"confirmDialog"},null,512),(0,s._)("div",l,[(0,s._)("div",o,[u,(0,s.Wm)(m,{onAddSubject:t[0]||(t[0]=e=>i.subjects.push(e))})]),(0,s.Wm)(f,{rows:i.subjects,columns:i.columns,"row-key":"id","rows-per-page-options":[50]},{"body-cell-action":(0,s.w5)((e=>[(0,s.Wm)(b,{props:e},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{class:"text-white",to:`/subjects/${e.key}`},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{color:"primary","icon-right":"edit","no-caps":"",flat:"",dense:""})])),_:2},1032,["to"]),(0,s.Wm)(d,{color:"negative","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:t=>r.deleteSubject(e.key)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns"])])])),_:1})}const i=(0,s._)("div",{class:"text-h6"},"New Subject",-1),r={class:"flex justify-between"};function c(e,t,a,l,o,u){const n=(0,s.up)("q-btn"),c=(0,s.up)("q-card-section"),m=(0,s.up)("q-input"),d=(0,s.up)("q-form"),p=(0,s.up)("q-card-actions"),b=(0,s.up)("q-card"),f=(0,s.up)("q-dialog"),h=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(n,{label:"New Subject",icon:"add",color:"primary",onClick:t[0]||(t[0]=e=>l.medium=!0)}),(0,s.Wm)(f,{modelValue:l.medium,"onUpdate:modelValue":t[3]||(t[3]=e=>l.medium=e)},{default:(0,s.w5)((()=>[(0,s.Wm)(b,{style:{width:"700px","max-width":"80vw"}},{default:(0,s.w5)((()=>[(0,s.Wm)(c,null,{default:(0,s.w5)((()=>[i])),_:1}),(0,s.Wm)(c,{class:"q-pt-none"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{onSubmit:u.createSubject,onReset:u.resetForm,class:"q-gutter-md"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{modelValue:o.formData.name,"onUpdate:modelValue":t[1]||(t[1]=e=>o.formData.name=e),type:"text",label:"Name",required:""},null,8,["modelValue"]),(0,s.Wm)(m,{modelValue:o.formData.abbr,"onUpdate:modelValue":t[2]||(t[2]=e=>o.formData.abbr=e),type:"text",label:"Abbreviation"},null,8,["modelValue"]),(0,s._)("div",r,[(0,s._)("div",null,[(0,s.wy)((0,s.Wm)(n,{flat:"",color:"primary",label:"Cancel"},null,512),[[h]])]),(0,s.Wm)(n,{label:"Submit",type:"submit",color:"primary"})])])),_:1},8,["onSubmit","onReset"])])),_:1}),(0,s.Wm)(p,{align:"right",class:"bg-white text-teal"})])),_:1})])),_:1},8,["modelValue"])])}var m=a(499);const d={props:["subjects"],setup(){return{medium:(0,m.iH)(!1)}},data(){return{formData:{name:"",abbr:""}}},created(){this.getClassRooms()},methods:{createSubject(){console.log(this.formData),this.$api.post("/subjects/",this.formData).then((e=>{this.$emit("addSubject",e.data),this.medium=!1,this.resetForm()}))},getClassRooms(){this.$api.get("/class-rooms/").then((e=>{this.classRooms=e.data}))},resetForm(){this.formData.name=null,this.formData.abbr=null}}};var p=a(1639),b=a(4455),f=a(2074),h=a(4458),w=a(3190),g=a(8326),j=a(6611),y=a(1821),W=a(2146),S=a(9984),_=a.n(S);const q=(0,p.Z)(d,[["render",c]]),v=q;_()(d,"components",{QBtn:b.Z,QDialog:f.Z,QCard:h.Z,QCardSection:w.Z,QForm:g.Z,QInput:j.Z,QCardActions:y.Z}),_()(d,"directives",{ClosePopup:W.Z});var Z=a(3419);const C={components:{CreateSubjectModal:v,ConfirmDialog:Z.Z},name:"SubjectsPage",data(){return{columns:[{name:"name",label:"Name",field:"name",align:"left"},{name:"action",label:"Action",field:"action",align:"left"}],subjects:[]}},created(){this.getSubjects()},methods:{getSubjects(){this.$api.get("/subjects/").then((e=>{this.subjects=e.data}))},deleteSubject(e){this.$refs.confirmDialog.show({title:"Hello",message:`Are you sure you want to delete the subject "${e}"?`,okButton:"Yes, delete"}).then((t=>{t&&this.$api.delete(`/subjects/${e}/`).then((t=>{204==t.status&&(this.subjects=this.subjects.filter((t=>t.id!=e)))}))}))}}};var D=a(9885),k=a(786),x=a(7220);const Q=(0,p.Z)(C,[["render",n]]),V=Q;_()(C,"components",{QPage:D.Z,QTable:k.Z,QTd:x.Z,QBtn:b.Z})}}]);